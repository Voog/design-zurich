var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){function t(){this.maxIterations=1e3,this.fractByPopulations=.75}var e,o,n,s,a,r;return t.sigbits=5,t.rshift=8-t.sigbits,s=function(e,o,n){return(e<<2*t.sigbits)+(o<<t.sigbits)+n},e=function(){function e(t,e,o,n,s,a,r){this.r1=t,this.r2=e,this.g1=o,this.g2=n,this.b1=s,this.b2=a,this.histo=r}return e.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},e.prototype.count=function(t){var e,o,n,a,r,i,l,c,g,u,d;if(!this._count_set||t){for(a=0,r=i=this.r1,g=this.r2;i<=g;r=i+=1)for(o=l=this.g1,u=this.g2;l<=u;o=l+=1)for(e=c=this.b1,d=this.b2;c<=d;e=c+=1)n=s(r,o,e),a+=this.histo[n]||0;this._count_set=!0,this._count=a}return this._count},e.prototype.copy=function(){return new e(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},e.prototype.average=function(e){var o,n,a,r,i,l,c,g,u,d,h,f,p,b,m,v;if(!this._average||e){for(c=1<<8-t.sigbits,d=0,u=0,r=0,n=0,g=h=this.r1,b=this.r2;h<=b;g=h+=1)for(a=f=this.g1,m=this.g2;f<=m;a=f+=1)for(o=p=this.b1,v=this.b2;p<=v;o=p+=1)l=s(g,a,o),d+=i=this.histo[l]||0,u+=i*(g+.5)*c,r+=i*(a+.5)*c,n+=i*(o+.5)*c;this._average=d?[~~(u/d),~~(r/d),~~(n/d)]:[~~(c*(this.r1+this.r2+1)/2),~~(c*(this.g1+this.g2+1)/2),~~(c*(this.b1+this.b2+1)/2)]}return this._average},e.prototype.contains=function(e){var o,n,s;return s=e[0]>>t.rshift,n=e[1]>>t.rshift,o=e[2]>>t.rshift,this.r1<=s&&s<=this.r2&&this.g1<=n&&n<=this.g2&&this.b1<=o&&o<=this.b2},e}(),o=function(){function t(){this.cboxes=new PriorityQueue(function(t,e){var o,n;return o=t.count()*t.volume(),n=e.count()*e.volume(),o>n?1:o<n?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var e,o,n;for(e=o=0,n=this.cboxes.size();o<n;e=o+=1)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var e,o,n,s,a,r,i;for(a=function(t){return t*t},n=1e9,o=r=0,i=this.cboxes.size();r<i;o=r+=1)(e=Math.sqrt(a(t[0]-this.cboxes.peek(o).color[0])+a(t[1]-this.cboxes.peek(o).color[1])+a(t[2]-this.cboxes.peek(o).color[2])))<n&&(n=e,s=this.cboxes.peek(o).color);return s},t}(),a=function(e){var o,n,a,r,i,l,c,g,u;for(r=1<<3*t.sigbits,a=new Array(r),g=0,u=e.length;g<u;g++)c=(l=e[g])[0]>>t.rshift,n=l[1]>>t.rshift,o=l[2]>>t.rshift,a[i=s(c,n,o)]=(a[i]||0)+1;return a},n=function(o,n){var s,a,r,i,l,c,g,u,d,h,f,p;for(h=1e6,d=0,c=1e6,l=0,r=1e6,a=0,f=0,p=o.length;f<p;f++)u=(g=o[f])[0]>>t.rshift,i=g[1]>>t.rshift,s=g[2]>>t.rshift,u<h?h=u:u>d&&(d=u),i<c?c=i:i>l&&(l=i),s<r?r=s:s>a&&(a=s);return new e(h,d,c,l,r,a,n)},r=function(t,e){var o,n,a,r,i,l,c,g,u,d,h,f,p,b,m,v,C,k,y,j,w,x,_,P,M,I,z,D,S,Q;if(e.count()){if(1===e.count())return[e.copy()];if(d=e.r2-e.r1+1,i=e.g2-e.g1+1,n=e.b2-e.b1+1,c=Math.max(d,i,n),f=0,g=[],l=[],c===d)for(u=p=e.r1,x=e.r2;p<=x;u=p+=1){for(h=0,r=b=e.g1,z=e.g2;b<=z;r=b+=1)for(o=m=e.b1,D=e.b2;m<=D;o=m+=1)h+=t[s(u,r,o)]||0;f+=h,g[u]=f}else if(c===i)for(r=v=e.g1,S=e.g2;v<=S;r=v+=1){for(h=0,u=C=e.r1,Q=e.r2;C<=Q;u=C+=1)for(o=k=e.b1,_=e.b2;k<=_;o=k+=1)h+=t[s(u,r,o)]||0;f+=h,g[r]=f}else for(o=y=e.b1,P=e.b2;y<=P;o=y+=1){for(h=0,u=j=e.r1,M=e.r2;j<=M;u=j+=1)for(r=w=e.g1,I=e.g2;w<=I;r=w+=1)h+=t[s(u,r,o)]||0;f+=h,g[o]=f}return g.forEach(function(t,e){return l[e]=f-t}),a=function(t){var o,n,s,a,r,i,c,u,d,h,p;for(i=t+"2",c=h=e[r=t+"1"],p=e[i];h<=p;c=h+=1)if(g[c]>f/2){for(o=e.copy(),n=e.copy(),a=(u=c-e[r])<=(d=e[i]-c)?Math.min(e[i]-1,~~(c+d/2)):Math.max(e[r],~~(c-1-u/2));!g[a];)a++;for(s=l[a];!s&&g[a-1];)s=l[--a];return o[i]=a,n[r]=o[i]+1,[o,n]}},c===d?a("r"):c===i?a("g"):c===n?a("b"):void 0}},t.prototype.quantize=function(t,e){var s,i,l,c,g,u,d=this;if(!t.length||e<2||e>256)return console.log("invalid arguments"),!1;for(l=a(t),s=n(t,l),(g=new PriorityQueue(function(t,e){var o,n;return o=t.count(),n=e.count(),o>n?1:o<n?-1:0})).push(s),(c=function(t,e){var o,n,a,i,c;for(i=1,c=0;c<d.maxIterations;)if((s=t.pop()).count()){if(a=r(l,s),o=a[0],n=a[1],!o)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(o),n&&(t.push(n),i++),i>=e)return;if(c++>d.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(s),c++})(g,this.fractByPopulations*e),u=new PriorityQueue(function(t,e){var o,n;return o=t.count()*t.volume(),n=e.count()*e.volume(),o>n?1:o<n?-1:0});g.size();)u.push(g.pop());for(c(u,e-u.size()),i=new o;u.size();)i.push(u.pop());return i},t}.call(this),function(){window.ColorExtract=function(){function t(){}return t.getColorMap=function(t,e,o,n,s,a){var r,i,l,c,g,u,d,h,f,p;for(null==a&&(a=8),l=t.getContext("2d").getImageData(e,o,n,s).data,c=[],u=d=o,f=o+s;d<f;u=d+=1)for(i=u*n*4,g=h=e,p=e+n;h<p;g=h+=1)r=i+4*g,c.push([l[r],l[r+1],l[r+2]]);return(new MMCQ).quantize(c,a)},t.colorDist=function(t,e){var o;return(o=function(t){return t*t})(t[0]-e[0])+o(t[1]-e[1])+o(t[2]-e[2])},t.extract=function(e,o,n){var s,a,r,i,l,c,g,u,d,h,f,p,b;for(o.width=25,o.height=25,o.getContext("2d").drawImage(e,0,0,o.width,o.height),(a=t.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),s=a[0].rgb,(g=t.getColorMap(o,0,0,e.width,e.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,e){return e.count-t.count}),u=0,h=0,p=g.length;h<p;h++)r=g[h],(i=t.colorDist(s,r.rgb))>u&&(u=i,l=r.rgb);for(u=0,f=0,b=g.length;f<b;f++)r=g[f],(i=t.colorDist(s,r.rgb))>u&&r.rgb!==l&&(u=i,c=r.rgb);return d=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},n({bgColor:d(s),fgColor:d(l),fgColor2:d(c)})},t}()}.call(this),function(t){var e=t("html").hasClass("editmode"),o=function(t,e,o){var n;return function(){var s=this,a=arguments,r=o&&!n;clearTimeout(n),n=setTimeout(function(){n=null,o||t.apply(s,a)},e),r&&t.apply(s,a)}},n=function(){t(".content, .sections, .footer").on("mousedown",function(e){t(e.target).closest(".js-prevent-sideclick").length||(t(".js-popover").removeClass("expanded"),t("body").hasClass("search-open")&&t(".js-search-close-btn").trigger("click"))})},s=function(){t(".js-menu-btn").click(function(e){e.stopPropagation(),t(this).toggleClass("open"),t(".js-menu-main").toggleClass("expanded"),t(".js-search-close-btn").hasClass("open")&&t(".js-search-close-btn").trigger("click")}),t(".js-menu-lang-btn").click(function(e){e.stopPropagation(),t(".js-menu-lang-popover").toggleClass("expanded")}),t(".js-search-open-btn").click(function(e){e.stopPropagation(),t(".js-menu-main").hasClass("expanded")&&(t(".js-menu-main").removeClass("expanded"),t(".js-menu-btn").removeClass("open")),t(this).addClass("open"),t("body").addClass("search-open"),t(".js-search-close-btn").addClass("open"),t(".js-search").addClass("active"),t(".js-search-inner").css({"margin-top":"-25px"}),t(".js-search-input").val("").focus()}),t(".js-search-close-btn").click(function(e){t(this).removeClass("open"),t("body").removeClass("search-open"),t(".js-search-open-btn").removeClass("open"),t(".js-search").removeClass("active")}),t(".js-search").click(function(t){t.stopPropagation()})},a=function(){t(document).ready(function(){t(".comment-form").hasClass("form_with_errors")?t("html, body").scrollTop(t(".comment-form").offset().top):t("form").find(".form_error, .form_notice").length>0&&t("html, body").scrollTop(t(".form_error, .form_notice").closest("form").offset().top)})},r=function(){!1===e&&t.each(t(".content-formatted"),function(){t(this).hasClass("js-custom-content-formatted")||t(this).find("table").wrap('<div class="table-container"></div>')})},i=function(){searchForm=t(".js-search-form"),t(".js-search-input").focus(function(){searchForm.addClass("active")}).blur(function(){searchForm.removeClass("active")})},l=function(){t(".js-search-form").on("submit",function(){searchModalHeight=t(".js-voog-search-modal").height(),t(".js-modal").css({top:"40px"})})},c=function(){t("html");var e=t(".js-menu-language-settings");t(window).width()<=960&&0===e.closest(".js-menu-lang-mobile").length?e.appendTo(".js-menu-lang-mobile"):t(window).width()>960&&0===e.closest(".js-menu-lang-desktop").length&&e.appendTo(".js-menu-lang-desktop")},g=function(){t(".voog-bg-picker-btn").on("click",function(e){t(this).closest(".container").find(".voog-bg-picker-btn.open").not(this).trigger("click").removeClass("open"),t(this).toggleClass("open"),e.stopPropagation()})},u=function(){t(".container").on("mousedown",function(e){t(e.target).closest(".voog-bg-picker-btn").length||(t(this).find(".voog-bg-picker-btn").removeClass("open"),e.stopPropagation())})},d=function(){var e=t(".js-header").width(),o=t(".js-header-right"),n=o.width(),s=parseInt(o.css("margin-left"))+1;t(".js-header-left").css("min-width",e-n-s)},h=function(t,e){for(var o,n=0,s=t.length;n<s;n++){if(t[n].width<e)return o||t[n];o=t[n]}return t[t.length-1]},f=function(t,e){for(var o=t.length;o--;)if(e.indexOf(t[o].url.trim())>-1)return!0;return!1},p=function(e,o){var n='[data-bg-global="'+e.attr("data-bg-global")+'"]',s=(e.attr("data-bg-global-boolean"),'[data-section-name="'+e.attr("data-section-name")+'"]');if(bgPickerCombinedLightness>=.5?(t(e).find(".js-background-type").addClass("light-background").removeClass("dark-background"),t(s).find(".js-background-type").addClass("light-background").removeClass("dark-background"),t(e).is('[data-bg-global-master="true"]')&&t(n).not('[data-bg-global-boolean="false"]').find(".js-background-type").addClass("light-background").removeClass("dark-background")):(t(e).find(".js-background-type").addClass("dark-background").removeClass("light-background"),t(s).find(".js-background-type").addClass("dark-background").removeClass("light-background"),t(e).is('[data-bg-global-master="true"]')&&t(n).not('[data-bg-global-boolean="false"]').find(".js-background-type").addClass("dark-background").removeClass("light-background")),t("body").find('[data-bg-global-master="true"]').find(".js-background-type").hasClass("light-background"))a="light-background";else var a="dark-background";t(".container").find(".js-bg-picker-area").removeClass("transparent-dark-background transparent-light-background").addClass("transparent-"+a),t(".container").find(n).removeClass("transparent-dark-background transparent-light-background").addClass("transparent-"+a),o>=.5?(t(e).attr("data-bg-global-boolean",!1),t(s).attr("data-bg-global-boolean",!1)):(t(e).attr("data-bg-global-boolean",!0),t(s).attr("data-bg-global-boolean",!0),t(e).find(".js-background-type").removeClass("light-background dark-background").addClass(a),t(s).find(".js-background-type").removeClass("light-background dark-background").addClass(a))},b=function(e,o){if(e&&o){"string"==typeof e&&(e=e.replace(/rgba?\(/,"").replace(/\)/,"").split(","),t.each(e,function(t,o){e[t]=+o})),"string"==typeof o&&(o=o.replace(/rgba?\(/,"").replace(/\)/,"").split(","),t.each(o,function(t,e){o[t]=+e})),"object"==typeof e&&e.hasOwnProperty("length")&&3==e.length&&e.push(1),"object"==typeof o&&o.hasOwnProperty("length")&&3==o.length&&o.push(1);var n=[0,0,0,0];return n[3]=1-(1-o[3])*(1-e[3]),0===n[3]&&(n[3]=1e-6),n[0]=Math.min(o[0]*o[3]/n[3]+e[0]*e[3]*(1-o[3])/n[3],255),n[1]=Math.min(o[1]*o[3]/n[3]+e[1]*e[3]*(1-o[3])/n[3],255),n[2]=Math.min(o[2]*o[3]/n[3]+e[2]*e[3]*(1-o[3])/n[3],255),t.map(n,function(t){return Math.floor(t)})}},m=function(t,e){return b(t||[255,255,255,1],e||[255,255,255,1])},v=function(t,e){var o=m(t,e);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100},C=function(){var e=t(".sections").height();t(".feature-section").outerHeight(e)},k=function(){var e=t(window).height()+t("header").height()-t("footer").height();t("main.content").height(e)},y=function(){t(window).resize(o(function(){c()},100))};window.site=t.extend(window.site||{},{initBlogPage:function(){},initArticlePage:function(){},initCommonPage:function(){handleFormFieldClick()},bindLanguageMenuSettings:function(e){"type"in e||(e.type="popover"),"item_state"in e||(e.item_state="flags_and_names");new Edicy.SettingsEditor(t(".js-menu-language-settings-toggle").get(0),{menuItems:[{titleI18n:"format_desktop_only",type:"radio",key:"type",list:[{titleI18n:"dropdown_menu",value:"popover"},{titleI18n:"expanded_menu",value:"list"}]},{titleI18n:"show",type:"radio",key:"item_state",list:[{titleI18n:"flags_only",value:"flags_only"},{titleI18n:"names_only",value:"names_only"},{titleI18n:"flags_and_names",value:"flags_and_names"}]}],values:e,buttonTitleI18n:"settings",containerClass:["js-menu-language-settings-popover","js-prevent-sideclick"],preview:function(e){var o=t("html");t(".js-menu-language-settings"),"list"===e.type?(o.removeClass("language-menu-mode-popover"),o.removeClass("menu-language-popover-open"),o.addClass("language-menu-mode-list")):(o.removeClass("language-menu-mode-list"),o.addClass("language-menu-mode-popover"),o.addClass("menu-language-popover-open"),t(".js-menu-lang-popover").addClass("expanded")),"flags_only"===e.item_state?(o.removeClass("language-flags-disabled"),o.removeClass("language-names-enabled"),o.addClass("language-flags-enabled"),o.addClass("language-names-disabled")):"names_only"===e.item_state?(o.removeClass("language-flags-enabled"),o.removeClass("language-names-disabled"),o.addClass("language-flags-disabled"),o.addClass("language-names-enabled")):"flags_and_names"===e.item_state&&(o.removeClass("language-flags-disabled"),o.removeClass("language-names-disabled"),o.addClass("language-flags-enabled"),o.addClass("language-names-enabled")),c(),this.setPosition()},commit:function(t){siteData.set("settings_language_menu",t)}});c()},togglePadding:function(){t(".voog-padding-switcher").on("click",function(e){e.stopPropagation();var o=t(this).closest(".feature-section"),n=o.attr("data-section-name");if(t(o).toggleClass("section-with-padding"),t(this).closest(o).hasClass("section-with-padding"))s=!1;else var s=!0;pageData.set(n+"_is_wide",s)})},bgPickerPreview:function(e,o,n,s){var a=t(e).find(".js-background-image").css("background-image"),r=o.imageSizes?h(o.imageSizes,t(window).width()):null,i=o.image&&""!==o.image?"url("+r.url+")":"none",l=o.imageSizes&&""!==o.imageSizes?o.imageSizes:null,c=o.color&&""!==o.color?o.color:"rgba(0,0,0,0)",g=o.colorData&&""!==o.colorData?o.colorData.a:0,u=s,d=t("<img>"),b=t("<canvas>"),m=o.image&&""!==o.image?o.image:null;m?f(l,a)?(bgPickerCombinedLightness=v(u,c),p(e,g),bgPickerImageColorData=u):(d.attr("src",m.replace(/.*\/(photos|voogstock)/g,"/photos")),d.on("load",function(){ColorExtract.extract(d[0],b[0],function(t){n.bgPickerImageColor=t.bgColor?t.bgColor:"rgba(255,255,255,1)",bgPickerCombinedLightness=v(n.bgPickerImageColor,c),p(e,g),bgPickerImageColorData=t.bgColor?t.bgColor:"rgba(255,255,255,1)",u=n.bgPickerImageColor})})):(bgPickerCombinedLightness=v("rgba(255,255,255,1)",c),p(e,g),bgPickerImageColorData=""),t(e).find(".js-background-image").css({"background-image":i}),t(e).find(".js-background-color").css({"background-color":c})},bgPickerCommit:function(e,o){var n=t.extend(!0,{},o);n.image=o.image||"",n.imageSizes=o.imageSizes||"",n.color=o.color||"",n.combinedLightness=bgPickerCombinedLightness,n.imageColorData=bgPickerImageColorData||"","articlePage"===pageType?"footer_bg"==e?siteData.set(e,n):Edicy.articles.currentArticle.setData(e,n):"contentPage"===pageType&&"footer_bg"===e||"body_bg"===e?siteData.set(e,n):pageData.set(e,n)},bgPickerColorScheme:function(e){void 0!==e&&(e>.6?t(".header-wrapper").addClass("light").removeClass("dark"):t(".header-wrapper").addClass("dark").removeClass("light"))},bindSiteSearch:function(e,o,n){e&&new VoogSearch(e,{per_page:10,lang:o,resultsContainer:t(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:480,updateOnKeypress:!0,noResults:n})}}),n(),s(),a(),y(),i(),l(),r(),g(),u(),!Modernizr.flexbox&&e&&d(),Modernizr.flexbox||Modernizr.flexwrap||t("html").addClass("no-flexbox"),t("html").hasClass("no-flexbox")&&(C(),t("body").hasClass("front-page")&&k())}(jQuery);